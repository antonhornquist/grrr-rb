require 'rake/testtask'

task :default => :tests

task :tests => [:test_grrr, :test_unstable, :test_grrr_ruby]

Rake::TestTask.new(:test_grrr) do |t|
	t.test_files = ["test/tc_grrr.rb"]
	t.libs << File.expand_path("../../scext-rb/lib", __FILE__) # TODO: improve, this assumes a certain directory structure
	t.warning = true
end

Rake::TestTask.new(:test_unstable) do |t|
	t.test_files = ["test/tc_unstable.rb"]
	t.libs << File.expand_path("../../scext-rb/lib", __FILE__) # TODO: improve, this assumes a certain directory structure
	t.warning = true
end

Rake::TestTask.new(:test_grrr_ruby) do |t|
	t.test_files = ["test/tc_grrr_ruby.rb"]
	t.libs << File.expand_path("../../scext-rb/lib", __FILE__) # TODO: improve, this assumes a certain directory structure
	t.warning = true
end

task :irb => :environment do
	require 'irb'
	ARGV.clear
	IRB.start
end

task :environment do
	require 'grrr'
	require 'unstable'
	require 'screengrid' if (defined? RUBY_ENGINE != nil) and RUBY_ENGINE == 'jruby'
end
